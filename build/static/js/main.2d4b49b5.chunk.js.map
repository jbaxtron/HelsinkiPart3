{"version":3,"sources":["services/person.js","App.js","index.js"],"names":["url","axios","get","then","response","data","addition","post","event","pid","target","value","delete","res","status","newObject","put","catch","error","Filter","readFilter","onChange","PersonForm","addName","readInput","readPhone","onSubmit","type","Directory","delPerson","persons","newFilter","fp","filter","person1","name","toLowerCase","includes","map","number","personId","id","DelButton","onClick","Message","message","className","App","useState","setPersons","newName","setNewName","newPhone","setNewPhone","setNewFilter","setMessage","useEffect","personService","console","log","preventDefault","checker","checkerP","window","alert","personToUpd","find","person","confirm","returnedPerson","setTimeout","concat","errormsg","found","pName","arrayMinus","x","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2d4b49b5.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\n\r\n\r\nconst url = '/api/persons'\r\n\r\nconst getFullList = () => {\r\n    const request = axios.get(`${url}`);\r\n    return request.then(response => response.data)\r\n      \r\n}\r\n\r\n\r\n\r\nconst addToList = (addition) => {\r\n    const request = axios.post(`${url}`, addition)\r\n    return request.then(response => {return response})\r\n    //.catch(error => {return(error)})\r\n}\r\n\r\n\r\n\r\nconst deleteFromList = (event) => {\r\n\r\n    const pid = event.target.value\r\n    \r\n    const request = axios.delete(`${url}/${pid}`)\r\n    return request.then(res => res.status)\r\n}\r\n\r\nconst updatePerson = (pid, newObject) => {\r\n    //const pid = event.target.value\r\n    const request = axios.put(`${url}/${pid}`, newObject)\r\n    return request.then(response => response.data)\r\n    .catch(error => {return(error.data)} )\r\n}\r\n\r\n\r\nexport default { getFullList, addToList, deleteFromList, updatePerson }","import React, { useState, useEffect } from 'react'\nimport personService from './services/person.js'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newPhone, setNewPhone] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [message, setMessage] = useState(null)\n\n\n\n\n  const addName = (event) => {\n    event.preventDefault()\n    console.log('button clicked', event.target)\n    const checker = persons.map(persons => persons.name)\n    const checkerP = persons.map(persons => persons.number)\n    const addition = { name: newName, number: newPhone }\n\n    if (newName === '' || newPhone === '') {\n      return;\n    }\n\n    if (checker.includes(newName) && checkerP.includes(newPhone)) {\n      window.alert(`${newName} is already added to the phonebook`)\n\n      return;\n\n    } \n    if (checker.includes(newName) && !checkerP.includes(newPhone)) {\n      const personToUpd = persons.find(person => person.name === newName)\n      console.log('Name: ', personToUpd.name)\n      const newObject = { ...personToUpd, number: newPhone }\n      console.log(`New Object: ${newObject}`)\n      const pid = personToUpd.id\n\n      if (window.confirm(`${newObject.name}, is already in the phone book, update number?`)) {\n        personService\n          .updatePerson(pid, newObject)\n          .then(returnedPerson =>\n            setPersons(persons.map(person1 => person1.id !== personToUpd.id ? person1 : returnedPerson))\n          )\n          .catch(() => {\n            setMessage(`${newObject.name} has already been deleted from the PhoneBook`);\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n\n\n        setMessage(`${newPhone} has been added to the PhoneBook`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setNewName('')\n        setNewPhone('')\n        return;\n      }\n    } \n\n      personService\n        .addToList(addition)\n        .then(response => {console.log('then', response)\n        if(response.status ===200){\n          setPersons(persons.concat([{ name: newName, number: newPhone }]))\n          setMessage(`${newName} has been added to the PhoneBook`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          return;\n        }\n        })\n        .catch(error => {\n          console.log('catcherror' ,error.response.data)\n          const errormsg = (error.response.data)\n          setMessage(`${errormsg}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          return;\n        })\n\n      // setMessage(`${newName} has been added to the PhoneBook`)\n      // setTimeout(() => {\n      //   setMessage(null)\n      // }, 5000)\n      setNewName('')\n      setNewPhone('')\n\n    }\n  \n\n  const readInput = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const readPhone = (event) => {\n    setNewPhone(event.target.value)\n  }\n\n  const readFilter = (event) => {\n    setNewFilter(event.target.value)\n\n\n  }\n\n  const delPerson = (event) => {\n    const pid = event.target.value\n    console.log(\"PID :\", pid)\n    console.log(`Persons: ${persons}`)\n\n\n    //This line gave me grief --v If the \"return\" is INSIDE the .find function it works, calling it on \"found\" as a function outside the function DOES NOT work. \n    const found = persons.find(person1 => { return person1.id === pid });\n    console.log(found)\n    const pName = found.name;\n    console.log(pName)\n\n\n\n\n    if (window.confirm(`Are you sure you want to delete ${pName} ?`)) {\n\n      const arrayMinus = persons.filter(x => x !== found)\n\n      personService\n        .deleteFromList(event)\n        .then(setPersons(arrayMinus))\n\n    }\n\n  }\n\n  useEffect(() => {\n    personService\n    .getFullList()\n    .then(response => {\n      setPersons(response)\n      console.log(persons)\n    })\n\n  }, [])\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} />\n      <Filter readFilter={readFilter} />\n      <h2>Add a new</h2>\n      <PersonForm addName={addName} readInput={readInput} readPhone={readPhone} />\n      <h2>Numbers</h2>\n      <Directory delPerson={delPerson} persons={persons} newFilter={newFilter} />\n\n\n    </div>\n  )\n  \n}\n\nconst Filter = ({ readFilter }) => {\n  return (\n    <div>\n      filter shown with <input onChange={readFilter} />\n    </div>\n  )\n}\n\nconst PersonForm = ({ addName, readInput, readPhone }) => {\n\n  return (\n    <form onSubmit={addName}>\n      <table>\n        <tbody>\n          <tr>\n            <td>Name:</td><td><input onChange={readInput} /></td>\n          </tr>\n          <tr>\n            <td>Number:</td><td><input onChange={readPhone} /></td>\n          </tr>\n          <tr>\n            <td><button type=\"submit\">add</button></td>\n          </tr>\n        </tbody>\n      </table>\n    </form>\n  )\n\n}\n\n\nconst Directory = ({ delPerson, persons, newFilter }) => {\n\n  const fp = persons.filter(person1 => person1.name.toLowerCase().includes(newFilter.toLowerCase()))\n\n  if (!newFilter === '') {\n    return (\n      \n\n        persons.map(person1 => <p key={person1.id}>{person1.name} {person1.number}\n          <DelButton  delPerson={delPerson} key={person1.id} personId={person1.id} /></p>)\n      \n    )\n\n  }\n  else {\n    return (\n      \n        fp.map(person1 => <p key={person1.id}>{person1.name} {person1.number}\n          <DelButton  delPerson={delPerson} key={person1.id} personId={person1.id} /></p>\n        )\n      \n    )\n  }\n}\n\nconst DelButton = ({ delPerson, personId }) => {\n\n\n  return (\n    <button value={personId} onClick={delPerson}>Delete</button>\n\n  )\n}\n\nconst Message = ({ message }) => {\n  if ((message === null)) {\n    return null\n  } else {\n    return (\n      <div className='Message'>\n        {message}\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n \n    <App />,\n \n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}